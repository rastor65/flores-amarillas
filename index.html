<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Flores Gal√°cticas ‚Äî Jard√≠n orbital</title>
  <meta name="description" content="Detalle rom√°ntico: flores amarillas orbitando en una galaxia interactiva. HTML, CSS y JS puros, listo para GitHub Pages." />
  <style>
    /* =====================================================
       üéõÔ∏è Tema y variables ‚Äî Ajusta colores y acentos aqu√≠
       ===================================================== */
    :root{
      /* Espacio */
      --space-1: #050510;   /* fondo profundo */
      --space-2: #0b0e2a;   /* halo azulado */
      --nebula-1: rgba(88, 61, 149, .55);
      --nebula-2: rgba(232, 161, 255, .20);
      --nebula-3: rgba(255, 205, 56, .16);

      /* Flores */
      --petal-1: #f7b500;   /* amarillo principal */
      --petal-2: #ffd54f;   /* amarillo medio */
      --petal-3: #fff59d;   /* brillo */
      --center-1: #fff6cf;  /* centro claro */
      --center-2: #f5c66a;  /* centro c√°lido */

      /* Tallo y hojas (sutiles, por est√©tica espacial) */
      --stem:   #2e7d32;
      --leaf:   #4caf50;

      /* Texto y elementos UI */
      --text:   #f7f3ff;
      --muted:  #c6c3d6;
      --panel:  rgba(255,255,255,.06);
      --panel-brd: rgba(255,255,255,.16);
      --glow:   0 0 24px rgba(255,220,96,.35), 0 0 64px rgba(180,140,255,.15);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, "Helvetica Neue", Arial;
      color:var(--text); background: radial-gradient(1200px 800px at 50% 50%, var(--space-2), var(--space-1));
      overflow:hidden;
    }

    /* ================= Header y panel de control ================= */
    header{ position:relative; z-index:3; text-align:center; padding:20px 16px 8px }
    .title{ margin:0; font-size:clamp(28px, 3.6vw, 46px); letter-spacing:.4px; text-shadow: var(--glow) }
    .subtitle{ margin:6px 0 0; color:var(--muted) }

    .panel{
      position:relative; z-index:3; max-width:1100px; margin:12px auto 0; padding:12px 14px; border-radius:16px;
      background:var(--panel); border:1px solid var(--panel-brd); backdrop-filter: blur(6px);
      display:flex; gap:12px; flex-wrap:wrap; align-items:end; justify-content:center
    }
    .panel label{display:block; font-size:12px; color:var(--muted); margin:0 0 6px}
    .panel input, .panel select{
      appearance:none; border:1px solid var(--panel-brd); border-radius:12px; padding:10px 12px; background:rgba(255,255,255,.08); color:var(--text)
    }
    .panel .field{min-width:200px}
    .panel button{ cursor:pointer; border:1px solid var(--panel-brd); background:rgba(255,255,255,.08); color:var(--text);
      padding:10px 14px; border-radius:999px; font-weight:600; transition:.18s ease;
    }
    .panel button:hover{ transform: translateY(-2px); box-shadow: 0 10px 22px rgba(0,0,0,.35); border-color:#ffd54f }

    /* ==================== Escena gal√°ctica ==================== */
    .scene{ position:relative; inset:0; height:calc(100% - 150px) }

    /* Capas de estrellas con parallax */
    .stars{ position:absolute; inset:0; overflow:hidden; z-index:0 }
    .stars .layer{ position:absolute; inset:-10%; }

    /* Nebulosa suave con gradientes y rotaci√≥n lenta */
    .nebula{ position:absolute; inset:-20%; z-index:1; mix-blend-mode: screen; pointer-events:none;
      background:
        radial-gradient(800px 600px at 30% 60%, var(--nebula-1), transparent 60%),
        radial-gradient(600px 500px at 70% 40%, var(--nebula-2), transparent 60%),
        radial-gradient(900px 700px at 50% 70%, var(--nebula-3), transparent 70%);
      filter: blur(2px); opacity:.75; animation: nebula-rot 120s linear infinite;
    }
    @keyframes nebula-rot{ from{ transform: rotate(0deg)} to{ transform: rotate(360deg)} }

    /* N√∫cleo luminoso (centro de la galaxia) */
    .core{ position:absolute; top:50%; left:50%; width:18vmin; height:18vmin; transform:translate(-50%,-50%); z-index:2;
      background: radial-gradient(circle at 50% 45%, #fff6d6 0%, #ffe79a 40%, rgba(255,214,97,.0) 70%);
      filter: blur(2px); border-radius:50%; box-shadow: 0 0 120px rgba(255,214,97,.35);
    }

    /* Conjunto de orbits en 3D con ligera inclinaci√≥n */
    .orbits{
      position:absolute; inset:0; z-index:2; transform-style:preserve-3d; perspective: 900px;
    }
    .orbits-inner{ position:absolute; top:50%; left:50%; transform: translate(-50%,-50%) rotateX(16deg) rotateZ(-10deg); transform-style:preserve-3d }

    /* Un orbit (carril circular) */
    .orbit{ position:absolute; top:0; left:0; right:0; bottom:0; transform-style:preserve-3d }
    .orbit::before{ content:""; position:absolute; top:50%; left:50%; translate:-50% -50%; width:var(--d); height:var(--d); border:1px dashed rgba(255,255,255,.12); border-radius:50%; pointer-events:none }

    /* Rotaciones */
    @keyframes spin-cw{ from{ transform: rotate(0deg)} to{ transform: rotate(360deg)} }
    @keyframes spin-ccw{ from{ transform: rotate(0deg)} to{ transform: rotate(-360deg)} }

    /* Flor */
    /* Flor */
    .flower{
      position:absolute; width:var(--size, 100px); height:var(--size, 100px);
      transform-origin:center; will-change: transform, filter; --open:0;
    }
    .flower:hover{ filter: drop-shadow(0 0 12px rgba(255,213,79,.6)) }
    .flower svg{ width:100%; height:100%; display:block }
    
    /* P√©talos realistas con apertura controlada por --open (0..1) */
    .flower .petal{
      transform-box: fill-box; transform-origin: 50% 72%;
      transition: transform .6s cubic-bezier(.2,.8,.2,1), filter .35s ease;
      transform: rotate(var(--a,0deg)) translate(0, var(--budY,-10px)) scale(calc(.62 + var(--open) * .46));
      filter: drop-shadow(0 2px 2px rgba(0,0,0,.12));
    }
    .flower.bloom{ --open:1 }
    .flower.bloom .petal{
      transform: rotate(var(--a,0deg)) translate(0, 0) scale(1);
      filter: drop-shadow(0 2px 4px rgba(0,0,0,.18)) drop-shadow(0 0 10px rgba(255,235,120,.25));
    }

    /* Accesibilidad: reducir movimiento */
    @media (prefers-reduced-motion: reduce){
      .orbit{ animation: none !important }
      .nebula{ animation: none }
      .flower .petal, .flower{ transition: none }
    }

    /* Footer */
    footer{ position:absolute; bottom:10px; left:0; right:0; text-align:center; color:var(--muted); z-index:3 }
  </style>
</head>
<body>
  <header>
    <h1 class="title">Flores gal√°cticas para <span id="destinataria">mi amor</span></h1>
    <p class="subtitle">Flores amarillas orbitando en una galaxia. Haz clic en una flor para verla florecer.</p>
  </header>

  <!-- Panel de control -->
  <section class="panel" aria-label="Controles de personalizaci√≥n">
    <div class="field">
      <label for="nombre">Dedicatoria</label>
      <input id="nombre" type="text" placeholder="Ej.: Sof√≠a" />
    </div>
    <div class="field">
      <label for="orbits">N√∫mero de √≥rbitas</label>
      <select id="orbits">
        <option>2</option>
        <option selected>3</option>
        <option>4</option>
        <option>5</option>
      </select>
    </div>
    <div class="field">
      <label for="perOrbit">Flores por √≥rbita</label>
      <select id="perOrbit">
        <option>6</option>
        <option selected>8</option>
        <option>12</option>
        <option>16</option>
      </select>
    </div>
    <button id="regen" type="button">Regenerar</button>
    <button id="bloomAll" type="button">Florecer todas</button>
  </section>

  <main class="scene" id="scene" aria-label="Jard√≠n orbital gal√°ctico">
    <!-- Capas de estrellas y nebulosa -->
    <div class="stars" id="stars">
      <div class="layer" data-depth="0.3"></div>
      <div class="layer" data-depth="0.6"></div>
      <div class="layer" data-depth="1.0"></div>
    </div>
    <div class="nebula"></div>

    <div class="core" aria-hidden="true"></div>

    <!-- Sistema de √≥rbitas -->
    <div class="orbits">
      <div class="orbits-inner" id="orbits"></div>
    </div>
  </main>

  <footer>
    <small>HTML, CSS y JavaScript puros ‚Äî listo para GitHub Pages.</small>
  </footer>

<script>
(function(){
  const destinataria = document.getElementById('destinataria');
  const nombre = document.getElementById('nombre');
  const stars = document.getElementById('stars');
  const orbitsRoot = document.getElementById('orbits');
  const selectOrbits = document.getElementById('orbits');
  const selectPer = document.getElementById('perOrbit');
  const btnRegen = document.getElementById('regen');
  const btnBloomAll = document.getElementById('bloomAll');
  const scene = document.getElementById('scene');

  /* ======================== Estrellas y parallax ======================== */
  function makeStarLayer(layer, n){
    layer.innerHTML = '';
    const depth = parseFloat(layer.dataset.depth || 1);
    for(let i=0;i<n;i++){
      const s = document.createElement('div');
      const size = Math.random()* (1.6/depth) + 0.6; // capas profundas = estrellas m√°s peque√±as
      s.style.position='absolute';
      s.style.width = size+'px';
      s.style.height = size+'px';
      s.style.borderRadius = '50%';
      s.style.background = 'white';
      s.style.left = (Math.random()*120 - 10) + '%';
      s.style.top  = (Math.random()*120 - 10) + '%';
      s.style.opacity = (0.3 + Math.random()*0.7).toFixed(2);
      s.style.filter = 'drop-shadow(0 0 4px rgba(255,255,255,.35))';
      s.style.animation = `tw${i} ${2 + Math.random()*4}s ease-in-out ${Math.random()}s infinite`;
      const style = document.createElement('style');
      style.textContent = `@keyframes tw${i}{0%,100%{opacity:${s.style.opacity}}50%{opacity:1}}`;
      document.head.appendChild(style);
      layer.appendChild(s);
    }
  }

  function buildStars(){
    const layers = stars.querySelectorAll('.layer');
    layers.forEach((layer, idx)=> makeStarLayer(layer, 100 + idx*60));
  }

  // Parallax ligero con movimiento del mouse
  scene.addEventListener('pointermove', (e)=>{
    const rect = scene.getBoundingClientRect();
    const cx = rect.width/2, cy = rect.height/2;
    const dx = (e.clientX - rect.left - cx)/cx; // -1..1
    const dy = (e.clientY - rect.top  - cy)/cy;
    stars.querySelectorAll('.layer').forEach(layer=>{
      const depth = parseFloat(layer.dataset.depth || 1);
      layer.style.transform = `translate(${dx * depth * -10}px, ${dy * depth * -10}px)`;
    });
    orbitsRoot.style.transform = `translate(-50%,-50%) rotateX(${16 + dy*6}deg) rotateZ(${-10 + dx*6}deg)`;
  });

  /* ======================== √ìrbitas y flores ======================== */
  let gid = 0; // para gradientes √∫nicos

  function flowerSVG(id){
    // 8 p√©talos el√≠pticos, con gradiente amarillo c√°lido
    const petals = Array.from({length:8}).map((_,i)=>`<ellipse class="petal" cx="50" cy="48" rx="14" ry="26" fill="url(#p-${id})" transform="rotate(${i*45} 50 60) translate(0,-8)"/>`).join('');
    return `<svg viewBox="0 0 100 100" aria-hidden="true">
      <defs>
        <radialGradient id="p-${id}" cx="50%" cy="35%" r="65%">
          <stop offset="0%" stop-color="var(--petal-3)"/>
          <stop offset="48%" stop-color="var(--petal-2)"/>
          <stop offset="100%" stop-color="var(--petal-1)"/>
        </radialGradient>
        <radialGradient id="c-${id}" cx="50%" cy="50%" r="55%">
          <stop offset="0%" stop-color="var(--center-1)"/>
          <stop offset="100%" stop-color="var(--center-2)"/>
        </radialGradient>
      </defs>
      ${petals}
      <circle cx="50" cy="60" r="10.5" fill="url(#c-${id})" />
    </svg>`;
  }

  function createFlower(size=100){
    const wrap = document.createElement('div');
    wrap.className = 'flower';
    wrap.style.setProperty('--size', size + 'px');
    wrap.setAttribute('role','button');
    wrap.setAttribute('tabindex','0');
    wrap.setAttribute('aria-label','Flor; pulsa para florecer');

    const id = ++gid;
    wrap.innerHTML = flowerSVG(id);

    function toggle(){ wrap.classList.toggle('bloom'); }
    wrap.addEventListener('click', toggle);
    wrap.addEventListener('keydown', (ev)=>{ if(ev.key==='Enter' || ev.key===' ') { ev.preventDefault(); toggle(); } });

    return wrap;
  }

  function createOrbit(diameter, speedSec, reverse){
    const o = document.createElement('div');
    o.className = 'orbit';
    o.style.setProperty('--d', diameter + 'px');
    o.style.width = o.style.height = diameter + 'px';
    o.style.marginLeft = o.style.marginTop = (-diameter/2) + 'px'; // centrar sobre n√∫cleo
    o.style.left = '50%'; o.style.top='50%'; position = 'absolute';
    o.style.animation = `${reverse? 'spin-ccw' : 'spin-cw'} ${speedSec}s linear infinite`;
    return o;
  }

  function populateOrbit(o, count){
    const radius = parseFloat(getComputedStyle(o).getPropertyValue('--d'))/2;
    for(let i=0;i<count;i++){
      const angle = (360/count)*i;
      const f = createFlower( clamp(64, 110, radius/3 + Math.random()*24) );
      f.style.transform = `rotate(${angle}deg) translate(${radius}px) rotate(${-angle}deg)`; // mantener flor orientada
      o.appendChild(f);
    }
  }

  function clamp(min, max, v){ return Math.max(min, Math.min(max, v)); }

  function buildOrbits(nOrbits, perOrbit){
    orbitsRoot.innerHTML = '';
    const base = Math.min(scene.clientWidth, scene.clientHeight) * 0.75;
    const step = base / (nOrbits + 1);
    for(let i=1;i<=nOrbits;i++){
      const d = step * i; // di√°metro creciente
      const speed = 26 + i*6 + Math.random()*6; // velocidades distintas
      const reverse = i % 2 === 0; // alternar sentido
      const o = createOrbit(d, speed, reverse);
      orbitsRoot.appendChild(o);
      populateOrbit(o, perOrbit);
    }
  }

  /* ======================== UI y eventos ======================== */
  nombre.addEventListener('input', ()=>{
    destinataria.textContent = nombre.value.trim() || 'mi amor';
  });
  btnRegen.addEventListener('click', ()=>{
    buildOrbits(parseInt(selectOrbits.value,10), parseInt(selectPer.value,10));
  });
  btnBloomAll.addEventListener('click', ()=>{
    document.querySelectorAll('.flower').forEach(f=> f.classList.add('bloom'));
  });

  // Rebuild on resize (debounce)
  let rT; window.addEventListener('resize', ()=>{ clearTimeout(rT); rT=setTimeout(()=>{
    buildOrbits(parseInt(selectOrbits.value,10), parseInt(selectPer.value,10));
  }, 200) });

  // Inicializaci√≥n
  buildStars();
  buildOrbits(parseInt(selectOrbits.value,10), parseInt(selectPer.value,10));
})();
</script>
</body>
</html>
