:root{
  /* Colores personalizables */
  --petal: #F4C542;      /* pétalos */
  --petal-2:#F7D76B;
  --center:#D89B00;      /* centro */
  --center-glow:#FFD457; /* halo */
  --leaf:#3E8F4C;        /* hojas */
  --stem:#2E7D32;        /* tallo */
  --text:#FAF9F6;        /* texto sobre galaxia */
  --halo:#EACB76;        /* brillo dorado */
  --msg-bg: rgba(10, 10, 20, 0.55);

  /* Duraciones/curvas */
  --fast: 220ms;
  --med: 420ms;
  --slow: 600ms;
  --ease: cubic-bezier(.215,.61,.355,1); /* ease-out suave */

  /* Tamaños */
  --max-w: 960px;
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body{
  margin:0;
  color:var(--text);
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji", "Segoe UI Symbol";
  background: #090b17;
  overflow-x: hidden;
}

/* Fondo galaxia */
.space{
  position: fixed;
  inset: 0;
  z-index: -3;
  overflow: hidden;
  background:
    radial-gradient(1200px 800px at 70% 30%, rgba(90,0,110,.35), transparent 60%),
    radial-gradient(900px 600px at 30% 70%, rgba(0,70,140,.28), transparent 60%),
    radial-gradient(600px 400px at 50% 50%, rgba(255,200,120,.12), transparent 60%),
    linear-gradient(180deg, #05060D 0%, #0C0F22 100%);
}

/* Estrellas en dos capas para parallax */
.stars, .nebula{
  position: absolute; inset: 0;
}

.stars::before, .stars::after{
  content:"";
  position: absolute;
  inset: -100px; /* margen extra para parallax */
  background-repeat: repeat;
  background-image:
    radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,.9) 40%, transparent 41%),
    radial-gradient(1px 1px at 60% 70%, rgba(255,255,255,.7) 40%, transparent 41%),
    radial-gradient(1px 1px at 80% 20%, rgba(255,255,255,.8) 40%, transparent 41%),
    radial-gradient(1px 1px at 40% 80%, rgba(255,255,255,.6) 40%, transparent 41%);
  background-size: 800px 800px;
  will-change: transform;
}

/* Capas con velocidades distintas */
.layer-1::before { transform: translate3d(0,0,0); }
.layer-1::after  { transform: translate3d(0,0,0); opacity:.5; }

.layer-2::before { transform: translate3d(0,0,0); filter: blur(0.5px); opacity:.9; }
.layer-2::after  { transform: translate3d(0,0,0); filter: blur(1px); opacity:.6; }

/* Nebulosa ligera */
.nebula{
  background:
    radial-gradient(600px 400px at 65% 40%, rgba(255,220,160,.10), transparent 60%),
    radial-gradient(500px 350px at 30% 60%, rgba(160,120,255,.08), transparent 60%);
  mix-blend-mode: screen;
  pointer-events: none;
}

/* Layout principal */
main{
  min-height: 100dvh;
  display: grid;
  place-items: center;
  padding: 4rem 1rem 5rem;
  max-width: var(--max-w);
  margin: 0 auto;
  text-align: center;
}

/* Botón accesible para alternar el mensaje */
.ghost-btn{
  position: fixed;
  top: 1rem;
  right: 1rem;
  background: transparent;
  color: var(--text);
  border: 1px solid rgba(255,255,255,.25);
  border-radius: 999px;
  padding: .6rem 1rem;
  backdrop-filter: blur(6px) saturate(120%);
  cursor: pointer;
  transition: transform var(--fast) var(--ease), border-color var(--fast) var(--ease);
}
.ghost-btn:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,.45); }
.ghost-btn:focus-visible{ outline: 2px solid var(--halo); outline-offset: 3px; }

/* Flor */
.flower{
  margin: 0;
  display: inline-block;
  filter: drop-shadow(0 10px 24px rgba(0,0,0,.35));
  transform-origin: 50% 100%;
  animation: sway 6s var(--ease) infinite alternate; /* mecido suave */
  will-change: transform, filter;
}
@keyframes sway{
  0%   { transform: rotate(-1.2deg) translateY(0); }
  100% { transform: rotate(1.2deg) translateY(-1px); }
}

.flower-svg{ display:block; }

.shadow{
  fill: rgba(0,0,0,.35);
  filter: blur(1.5px);
}

/* Tallo y hojas */
.stem{
  fill: none;
  stroke: var(--stem);
  stroke-width: 5;
  stroke-linecap: round;
  filter: drop-shadow(0 2px 2px rgba(0,0,0,.25));
}
.leaf{
  fill: linear-gradient(180deg, var(--leaf), #2c6f3f);
  fill: var(--leaf);
  filter: drop-shadow(0 2px 2px rgba(0,0,0,.25));
}
.leaf.left { transform-origin: 135px 280px; }
.leaf.right{ transform-origin: 165px 300px; }

/* Pétalos */
.petals path{
  fill: var(--petal);
  stroke: rgba(120,80,0,.25);
  stroke-width: .6;
  filter:
    drop-shadow(0 .5px 0 rgba(255,255,255,.15))
    drop-shadow(0 2px 4px rgba(0,0,0,.25));
  transform-origin: 150px 205px;
  transition:
    transform var(--med) var(--ease),
    filter var(--med) var(--ease);
}
.petals.front path{ fill: var(--petal-2); }

/* Centro */
.center{
  fill: var(--center);
  filter:
    drop-shadow(0 0 3px rgba(0,0,0,.35))
    drop-shadow(0 0 10px rgba(255,210,90,.15));
  transition: filter var(--fast) var(--ease);
}
.center-glow{
  fill: none;
  stroke: radial-gradient(var(--center-glow), transparent);
  fill: rgba(255,212,87,.12);
  filter: blur(4px);
  transition: opacity var(--fast) var(--ease);
}

/* Estados interactivos: hover/focus */
.flower:hover .petals path,
.flower:focus-visible .petals path{
  transform: scale(1.03) rotate(var(--petal-tilt, 0deg));
  filter:
    drop-shadow(0 0 4px rgba(234,203,118,.25))
    drop-shadow(0 6px 10px rgba(0,0,0,.28));
}
.flower:hover .center,
.flower:focus-visible .center{
  filter:
    drop-shadow(0 0 6px rgba(255,210,100,.35))
    drop-shadow(0 0 18px rgba(255,210,100,.25));
}
.flower:hover .center-glow,
.flower:focus-visible .center-glow{
  opacity: .9;
}

/* Efecto "bloom" (click) */
.flower.bloom .petals path{
  transform: scale(1.05);
}
.flower.bloom .center{
  filter:
    drop-shadow(0 0 10px rgba(255,220,120,.55))
    drop-shadow(0 0 24px rgba(255,220,120,.35));
}

/* Mensaje romántico */
.message{
  margin-top: 1.25rem;
  max-width: min(90vw, 680px);
  background: var(--msg-bg);
  border: 1px solid rgba(255,255,255,.18);
  border-radius: 16px;
  padding: 1rem 1.25rem;
  backdrop-filter: blur(10px) saturate(120%);
  box-shadow: 0 10px 24px rgba(0,0,0,.25);
  transition: opacity var(--med) var(--ease), transform var(--med) var(--ease);
}
.message[hidden]{ display: block; opacity: 0; transform: translateY(6px) scale(.98); height: 0; padding: 0 1.25rem; border-color: transparent; overflow: hidden; }
.message p{ margin: 0; line-height: 1.6; }

/* Utilidad: texto solo para lectores de pantalla */
.visually-hidden{
  position: absolute !important;
  height: 1px; width: 1px;
  overflow: hidden; clip: rect(1px,1px,1px,1px);
  white-space: nowrap; border: 0; padding: 0; margin: -1px;
}

/* Parallax: las capas .stars se mueven vía transform (JS) */
.stars, .nebula{ will-change: transform; }

/* Respeta reduce motion */
@media (prefers-reduced-motion: reduce){
  .flower{ animation: none; }
  .stars::before, .stars::after{ background-attachment: initial; }
  .stars, .nebula{ transition: none !important; }
}
